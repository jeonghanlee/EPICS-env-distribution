<html><head><title>Calculation Record (calc)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
<link rel="stylesheet" type="text/css" title="pod_stylesheet" href="style.css">

</head>
<body class='pod'>
<!--
  generated by EPICS::PodHtml v,
  using Pod::Simple::PullParser v3.43,
  under Perl v5.036000 at Wed May 14 19:38:04 2025 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to EPICS::PodHtml, and/or subclassing EPICS::PodHtml,
   then reconverting this document from the Pod source.
   When in doubt, email the author of EPICS::PodHtml for advice.
   See 'perldoc EPICS::PodHtml' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>
<div class="pod">


<h1><a class='u'
name="Calculation-Record-calc"
>Calculation Record (calc)</a></h1>

<p>The calculation or &#34;Calc&#34; record is used to perform algebraic,
relational,
and logical operations on values retrieved from other records.
The result of its operations can then be accessed by another record so that it can then be used.</p>

<h2><a class='u'
name="Parameter-Fields"
>Parameter Fields</a></h2>

<p>The record-specific fields are described below,
grouped by functionality.</p>

<h3><a class='u'
name="Scan-Parameters"
>Scan Parameters</a></h3>

<p>The Calc record has the standard fields for specifying under what circumstances the record will be processed.
These fields are described in <a href="dbCommonRecord.html#Scan-Fields" class="podlinkpod"
>Scan Fields</a>.</p>
<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">SCAN</td><td class="cell">Scan Mechanism</td><td class="cell">MENU (<a href='menuScan.html'>menuScan</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">PHAS</td><td class="cell">Scan Phase</td><td class="cell">SHORT</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">EVNT</td><td class="cell">Event Name</td><td class="cell">STRING [40]</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">PRIO</td><td class="cell">Scheduling Priority</td><td class="cell">MENU (<a href='menuPriority.html'>menuPriority</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">PINI</td><td class="cell">Process at iocInit</td><td class="cell">MENU (<a href='menuPini.html'>menuPini</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

</table></blockquote>


<h3><a class='u'
name="Read-Parameters"
>Read Parameters</a></h3>

<p>The read parameters for the Calc record consist of 12 input links INPA,
INPB,
...
INPL.
The fields can be database links,
channel access links,
or constants.
If they are links,
they must specify another record&#39;s field or a channel access link.
If they are constants,
they will be initialized with the value they are configured with and can be changed via <code>dbPuts</code>.
They cannot be hardware addresses.</p>

<p>See <a href="https://docs.epics-controls.org/en/latest/guides/EPICS_Process_Database_Concepts.html#address-specification" class="podlinkurl"
>Address Specification</a> for information on how to specify database links.</p>
<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">INPA</td><td class="cell">Input A</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INPB</td><td class="cell">Input B</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INPC</td><td class="cell">Input C</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INPD</td><td class="cell">Input D</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INPE</td><td class="cell">Input E</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INPF</td><td class="cell">Input F</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INPG</td><td class="cell">Input G</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INPH</td><td class="cell">Input H</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INPI</td><td class="cell">Input I</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INPJ</td><td class="cell">Input J</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INPK</td><td class="cell">Input K</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INPL</td><td class="cell">Input L</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

</table></blockquote>


<h3><a class='u'
name="Expression"
>Expression</a></h3>

<p>At the core of the Calc record lies the CALC and RPCL fields.
The CALC field contains the infix expresion which the record routine will use when it processes the record.
The resulting value is placed in the VAL field and can be accessed from there.
The CALC expression is actually converted to opcode and stored as Reverse Polish Notation in the RPCL field.
It is this expression which is actually used to calculate VAL.
The Reverse Polish expression is evaluated more efficiently during run-time than an infix expression.
CALC can be changed at run-time,
and a special record routine calls a function to convert it to Reverse Polish Notation.</p>

<p>The infix expressions that can be used are very similar to the C expression syntax,
but with some additions and subtle differences in operator meaning and precedence.
The string may contain a series of expressions separated by a semi-colon character &#34;;&#34; any one of which may actually provide the calculation result; however,
all of the other expressions included must assign their result to a variable.
All alphabetic elements described below are case independent,
so upper and lower case letters may be used and mixed in the variable and function names as desired.
Spaces may be used anywhere within an expression except between characters that make up a single expression element.</p>

<p>The range of expressions supported by the calculation record are separated into literals,
constants,
operands,
algebraic operators,
trigonometric operators,
relational operators,
logical operators,
the assignment operator,
parentheses and commas,
and the question mark or &#39;?:&#39; operator.</p>
<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">CALC</td><td class="cell">Calculation</td><td class="cell">STRING [80]</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">RPCL</td><td class="cell">Reverse Polish Calc</td><td class="cell">NOACCESS</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">No</td><td class="cell">No</td><td class="cell">No</td></tr>

</table></blockquote>


<h3><a class='u'
name="Literals"
>Literals</a></h3>

<ul>
<li>Standard double precision floating point numbers</li>

<li>Inf: Infinity</li>

<li>Nan: Not a Number</li>
</ul>

<h3><a class='u'
name="Constants"
>Constants</a></h3>

<ul>
<li>PI: returns the mathematical constant &#960;</li>

<li>D2R: evaluates to &#960;/180 which,
when used as a multiplier,
converts an angle from degrees to radians</li>

<li>R2D: evaluates to 180/&#960; which as a multiplier converts an angle from radians to degrees</li>
</ul>

<h3><a class='u'
name="Operands"
>Operands</a></h3>

<p>The expression uses the values retrieved from the INPx links as operands,
though constants can be used as operands too.
These values retrieved from the input links are stored in the A-L fields.
The values to be used in the expression are simply referenced by the field letter.
For instance,
the value obtained from INPA link is stored in the field A,
and the value obtained from INPB is stored in field B.
The field names can be included in the expression which will operate on their respective values,
as in A+B.
Also,
the RNDM nullary function can be included as an operand in the expression in order to generate a random number between 0 and 1.</p>
<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">A</td><td class="cell">Value of Input A</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">B</td><td class="cell">Value of Input B</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">C</td><td class="cell">Value of Input C</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">D</td><td class="cell">Value of Input D</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">E</td><td class="cell">Value of Input E</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">F</td><td class="cell">Value of Input F</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">G</td><td class="cell">Value of Input G</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">H</td><td class="cell">Value of Input H</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">I</td><td class="cell">Value of Input I</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">J</td><td class="cell">Value of Input J</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">K</td><td class="cell">Value of Input K</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">L</td><td class="cell">Value of Input L</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

</table></blockquote>


<p>The keyword VAL returns the current contents of the VAL field (which can be written to by a CA put,
so it might <i>not</i> be the result from the last time the expression was evaluated).</p>

<h3><a class='u'
name="Algebraic-Operators"
>Algebraic Operators</a></h3>

<ul>
<li>ABS: Absolute value (unary)</li>

<li>SQR: Square root (unary)</li>

<li>MIN: Minimum (any number of args)</li>

<li>MAX: Maximum (any number of args)</li>

<li>FINITE: returns non-zero if none of the arguments are NaN or Inf (any number of args)</li>

<li>ISNAN: returns non-zero if any of the arguments is NaN or Inf (any number of args)</li>

<li>CEIL: Ceiling (unary)</li>

<li>FLOOR: Floor (unary)</li>

<li>LOG: Log base 10 (unary)</li>

<li>LOGE: Natural log (unary)</li>

<li>LN: Natural log (unary)</li>

<li>EXP: Exponential function (unary)</li>

<li>^ : Exponential (binary)</li>

<li>** : Exponential (binary)</li>

<li>+ : Addition (binary)</li>

<li>- : Subtraction (binary)</li>

<li>* : Multiplication (binary)</li>

<li>/ : Division (binary)</li>

<li>% : Modulo (binary)</li>

<li>NOT: Negate (unary)</li>
</ul>

<h3><a class='u'
name="Trigonometric-Operators"
>Trigonometric Operators</a></h3>

<ul>
<li>SIN: Sine</li>

<li>SINH: Hyperbolic sine</li>

<li>ASIN: Arc sine</li>

<li>COS: Cosine</li>

<li>COSH: Hyperbolic cosine</li>

<li>ACOS: Arc cosine</li>

<li>TAN: Tangent</li>

<li>TANH: Hyperbolic tangent</li>

<li>ATAN: Arc tangent</li>
</ul>

<h3><a class='u'
name="Relational-Operators"
>Relational Operators</a></h3>

<ul>
<li><code>&#62;=</code> : Greater than or equal to</li>

<li><code>&#62;</code> : Greater than</li>

<li><code>&#60;=</code> : Less than or equal to</li>

<li><code>&#60;</code> : Less than</li>

<li><code>#</code> : Not equal to</li>

<li><code>=</code> : Equal to</li>
</ul>

<h3><a class='u'
name="Logical-Operators"
>Logical Operators</a></h3>

<ul>
<li><code>&#38;&#38;</code> : And</li>

<li><code>||</code> : Or</li>

<li><code>!</code> : Not</li>
</ul>

<h3><a class='u'
name="Bitwise-Operators"
>Bitwise Operators</a></h3>

<ul>
<li><code>|</code> : Bitwise Or</li>

<li><code>&#38;</code> : Bitwise And</li>

<li>OR : Bitwise Or</li>

<li>AND : Bitwise And</li>

<li>XOR : Bitwise Exclusive Or</li>

<li><code>~</code> : One&#39;s Complement</li>

<li><code>&#60;&#60;</code> : Arithmetic Left Shift</li>

<li><code>&#62;&#62;</code> : Arithmetic Right Shift</li>

<li><code>&#62;&#62;&#62;</code> : Logical Right Shift</li>
</ul>

<h3><a class='u'
name="Assignment-Operator"
>Assignment Operator</a></h3>

<ul>
<li><code>:=</code> : assigns a value (right hand side) to a variable (i.e.
field)</li>
</ul>

<h3><a class='u'
name="Parantheses-Comma-and-Semicolon"
>Parantheses,
Comma,
and Semicolon</a></h3>

<p>The open and close parentheses are supported.
Nested parentheses are supported.</p>

<p>The comma is supported when used to separate the arguments of a binary function.</p>

<p>The semicolon is used to separate expressions.
Although only one traditional calculation expression is allowed,
multiple assignment expressions are allowed.</p>

<h3><a class='u'
name="Conditional-Expression"
>Conditional Expression</a></h3>

<p>The C language&#39;s question mark operator is supported.
The format is: <code>condition ?
True result : False result</code></p>

<h3><a class='u'
name="Expression-Examples"
>Expression Examples</a></h3>

<h3><a class='u'
name="Algebraic"
>Algebraic</a></h3>

<p><code>A + B + 10</code></p>

<ul>
<li>Result is <code>A + B + 10</code></li>
</ul>

<h3><a class='u'
name="Relational"
>Relational</a></h3>

<p><code>(A + B) &#60; (C + D)</code></p>

<ul>
<li>Result is 1 if <code>(A + B) &#60; (C + D)</code></li>

<li>Result is 0 if <code>(A + B) &#62;= (C + D)</code></li>
</ul>

<h3><a class='u'
name="Question-Mark"
>Question Mark</a></h3>

<p><code>(A + B) &#60; (C + D) ?
E : F + L + 10</code></p>

<ul>
<li>Result is <code>E</code> if <code>(A + B) &#60; (C + D)</code></li>

<li>Result is <code>F + L + 10</code> if <code>(A + B) &#62;= (C + D)</code></li>
</ul>

<p>Prior to Base 3.14.9 it was legal to omit the : and the second (else) part of the conditional,
like this:</p>

<p><code>(A + B)&#60;(C + D) ?
E</code></p>

<dl>
<dt><a name="Result-is-E-if-A-B-C-D"
>Result is E if (A + B)&#60;(C + D)</a></dt>

<dd>
<dt><a name="Result-is-unchanged-if-A-B-C-D"
>Result is unchanged if (A + B)&#62;=(C + D)</a></dt>

<dd>
<p>From 3.14.9 onwards,
this expresion must be written as <code>(A + B) &#60; (C + D) ?
E : VAL</code></p>
</dd>
</dl>

<h3><a class='u'
name="Logical"
>Logical</a></h3>

<p><code>A &#38; B</code></p>

<ul>
<li>Causes the following to occur:
<ul>
<li>Convert A to integer</li>

<li>Convert B to integer</li>

<li>Bitwise And A and B</li>

<li>Convert result to floating point</li>
</ul>
</li>
</ul>

<h3><a class='u'
name="Assignment"
>Assignment</a></h3>

<p><code>sin(a); a:=a+D2R</code></p>

<ul>
<li>Causes the Calc record to output the successive values of a sine curve in 1 degree intervals.</li>
</ul>

<h3><a class='u'
name="Operator-Display-Parameters"
>Operator Display Parameters</a></h3>

<p>These parameters are used to present meaningful data to the operator.
These fields are used to display VAL and other parameters of the calculation record either textually or graphically.</p>

<p>The EGU field contains a string of up to 16 characters which is supplied by the user and which describes the values being operated upon.
The string is retrieved whenever the routine <code>get_units</code> is called.
The EGU string is solely for an operator&#39;s sake and does not have to be used.</p>

<p>The HOPR and LOPR fields only refer to the limits of the VAL,
HIHI,
HIGH,
LOW and LOLO fields.
PREC controls the precision of the VAL field.</p>

<p>See <a href="dbCommonRecord.html#Operator-Display-Parameters" class="podlinkpod"
>Fields Common to All Record Types</a> for more on the record name (NAME) and description (DESC) fields.</p>
<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">EGU</td><td class="cell">Engineering Units</td><td class="cell">STRING [16]</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">PREC</td><td class="cell">Display Precision</td><td class="cell">SHORT</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">HOPR</td><td class="cell">High Operating Rng</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">LOPR</td><td class="cell">Low Operating Range</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">NAME</td><td class="cell">Record Name</td><td class="cell">STRING [61]</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">DESC</td><td class="cell">Descriptor</td><td class="cell">STRING [41]</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

</table></blockquote>


<h3><a class='u'
name="Alarm-Parameters"
>Alarm Parameters</a></h3>

<p>The possible alarm conditions for the Calc record are the SCAN,
READ,
Calculation,
and limit alarms.
The SCAN and READ alarms are called by the record support routines.
The Calculation alarm is called by the record processing routine when the CALC expression is an invalid one,
upon which an error message is generated.</p>

<p>The following alarm parameters which are configured by the user,
define the limit alarms for the VAL field and the severity corresponding to those conditions.</p>

<p>The HYST field defines an alarm deadband for each limit.</p>

<p>See <a href="https://docs.epics-controls.org/en/latest/guides/EPICS_Process_Database_Concepts.html#alarm-specification" class="podlinkurl"
>Alarm Specification</a> for a complete explanation of record alarms and of the standard fields.
<a href="dbCommonRecord.html#Alarm-Fields" class="podlinkpod"
>Alarm Fields</a> lists other fields related to alarms that are common to all record types.</p>
<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">HIHI</td><td class="cell">Hihi Alarm Limit</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">HIGH</td><td class="cell">High Alarm Limit</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">LOW</td><td class="cell">Low Alarm Limit</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">LOLO</td><td class="cell">Lolo Alarm Limit</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">HHSV</td><td class="cell">Hihi Severity</td><td class="cell">MENU (<a href='menuAlarmSevr.html'>menuAlarmSevr</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">HSV</td><td class="cell">High Severity</td><td class="cell">MENU (<a href='menuAlarmSevr.html'>menuAlarmSevr</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">LSV</td><td class="cell">Low Severity</td><td class="cell">MENU (<a href='menuAlarmSevr.html'>menuAlarmSevr</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">LLSV</td><td class="cell">Lolo Severity</td><td class="cell">MENU (<a href='menuAlarmSevr.html'>menuAlarmSevr</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">HYST</td><td class="cell">Alarm Deadband</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

</table></blockquote>


<h3><a class='u'
name="Monitor-Parameters"
>Monitor Parameters</a></h3>

<p>These paramaeters are used to determine when to send monitors for the value fields.
These monitors are sent when the value field exceeds the last monitored field by the appropriate deadband,
the ADEL for archiver monitors and the MDEL field for all other types of monitors.
If these fields have a value of zero,
everytime the value changes,
monitors are triggered; if they have a value of -1,
everytime the record is scanned,
monitors are triggered.
See <a href="#Monitor-Specification" class="podlinkpod"
>&#34;Monitor Specification&#34;</a> for a complete explanation of monitors.</p>
<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">ADEL</td><td class="cell">Archive Deadband</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">MDEL</td><td class="cell">Monitor Deadband</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

</table></blockquote>


<h3><a class='u'
name="Run-time-Parameters"
>Run-time Parameters</a></h3>

<p>These fields are not configurable using a configuration tool and none are modifiable at run-time.
They are used to process the record.</p>

<p>The LALM field is used to implement the hysteresis factor for the alarm limits.</p>

<p>The LA-LL fields are used to decide when to trigger monitors for the corresponding fields.
For instance,
if LA does not equal the value A,
monitors for A are triggered.
The MLST and ALST fields are used in the same manner for the VAL field.</p>
<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">LALM</td><td class="cell">Last Value Alarmed</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">ALST</td><td class="cell">Last Value Archived</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">MLST</td><td class="cell">Last Val Monitored</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">LA</td><td class="cell">Prev Value of A</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">LB</td><td class="cell">Prev Value of B</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">LC</td><td class="cell">Prev Value of C</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">LD</td><td class="cell">Prev Value of D</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">LE</td><td class="cell">Prev Value of E</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">LF</td><td class="cell">Prev Value of F</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">LG</td><td class="cell">Prev Value of G</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">LH</td><td class="cell">Prev Value of H</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">LI</td><td class="cell">Prev Value of I</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">LJ</td><td class="cell">Prev Value of J</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">LK</td><td class="cell">Prev Value of K</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">LL</td><td class="cell">Prev Value of L</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

</table></blockquote>


<h2><a class='u'
name="Record-Support"
>Record Support</a></h2>

<h3><a class='u'
name="Record-Support-Routines"
>Record Support Routines</a></h3>

<h2><a class='u'
name="init_record"
><code>init_record</code></a></h2>

<p>For each constant input link,
the corresponding value field is initialized with the constant value if the input link is CONSTANT or a channel access link is created if the input link is a PV_LINK.</p>

<p>A routine postfix is called to convert the infix expression in CALC to Reverse Polish Notation.
The result is stored in RPCL.</p>

<h2><a class='u'
name="process"
><code>process</code></a></h2>

<p>See next section.</p>

<h2><a class='u'
name="special"
><code>special</code></a></h2>

<p>This is called if CALC is changed.
<code>special</code> calls postfix.</p>

<h2><a class='u'
name="get_units"
><code>get_units</code></a></h2>

<p>Retrieves EGU.</p>

<h2><a class='u'
name="get_precision"
><code>get_precision</code></a></h2>

<p>Retrieves PREC.</p>

<h2><a class='u'
name="get_graphic_double"
><code>get_graphic_double</code></a></h2>

<p>Sets the upper display and lower display limits for a field.
If the field is VAL,
HIHI,
HIGH,
LOW,
or LOLO,
the limits are set to HOPR and LOPR,
else if the field has upper and lower limits defined they will be used,
else the upper and lower maximum values for the field will be used.</p>

<h2><a class='u'
name="get_control_double"
><code>get_control_double</code></a></h2>

<p>Sets the upper control and the lower control limits for a field.
If the field is VAL,
HIHI,
HIGH,
LOW,
or LOLO,
the limits are set to HOPR and LOPR,
else if the field has upper and lower limits defined they will be used,
else the upper and lower maximum values for the field type will be used.</p>

<h2><a class='u'
name="get_alarm_double"
><code>get_alarm_double</code></a></h2>

<p>Sets the following values:</p>

<blockquote>
<p>upper_alarm_limit = HIHI</p>

<p>upper_warning_limit = HIGH</p>

<p>lower_warning_limit = LOW</p>

<p>lower_alarm_limit = LOLO</p>
</blockquote>

<h3><a class='u'
name="Record-Processing"
>Record Processing</a></h3>

<p>Routine process implements the following algorithm:</p>

<dl>
<dt><a name="Fetch-all-arguments"
>1.
Fetch all arguments.</a></dt>

<dd>
<dt><a 
>2.
Call routine <code>calcPerform</code>,
which calculates VAL from the postfix version of the expression given in CALC.
If <code>calcPerform</code> returns success UDF is set to FALSE.</a></dt>

<dd>
<dt><a 
>3.
Check alarms.
This routine checks to see if the new VAL causes the alarm status and severity to change.
If so,
NSEV,
NSTA,
and LALM are set.
It also honors the alarm hysteresis factor (HYST).
Thus the value must change by at least HYST before the alarm status and severity changes.</a></dt>

<dd>
<dt><a name="Check-to-see-if-monitors-should-be-invoked"
>4.
Check to see if monitors should be invoked.</a></dt>
</dl>

<ul>
<li>Alarm monitors are invoked if the alarm status or severity has changed.</li>

<li>Archive and values change monitors are invoked if ADEL and MDEL conditions are met.</li>

<li>Monitors for A-L are checked whenever other monitors are invoked.</li>

<li>NSEV and NSTA are reset to 0.</li>
</ul>

<dl>
<dt><a name="Scan-forward-link-if-necessary-set-PACT-FALSE-and-return"
>5.
Scan forward link if necessary,
set PACT FALSE,
and return.</a></dt>
</dl>
</div>


<!-- end doc -->

</body></html>
