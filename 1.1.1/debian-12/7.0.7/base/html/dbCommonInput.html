<html><head><title>Fields Common to Input Record Types</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" type="text/css" title="pod_stylesheet" href="style.css">

</head>
<body class='pod'>
<!--
  generated by EPICS::PodHtml v,
  using Pod::Simple::PullParser v3.43,
  under Perl v5.036000 at Thu May 22 09:47:31 2025 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to EPICS::PodHtml, and/or subclassing EPICS::PodHtml,
   then reconverting this document from the Pod source.
   When in doubt, email the author of EPICS::PodHtml for advice.
   See 'perldoc EPICS::PodHtml' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u'
name="Fields-Common-to-Input-Record-Types"
>Fields Common to Input Record Types</a></h1>

<p>This section describes fields that are found in many input record types.
These fields usually have the same meaning whenever they are used.</p>

<p>See also <a href="dbCommonRecord.html" class="podlinkpod"
>Fields Common to All Record Types</a> and <a href="dbCommonOutput.html" class="podlinkpod"
>Fields Common to Output Record Types</a>.</p>

<h3><a class='u'
name="Input-and-Value-Fields"
>Input and Value Fields</a></h3>

<p>The <b>INP</b> field specifies an input link.
It is used by the device support routines to obtain input.
For soft analog records it can be a constant,
a database link,
or a channel access link.</p>

<p>The <b>DTYP</b> field specifies the name of the device support module that will input values.
Each record type has its own set of device support routines.
If a record type does not have any associated device support,
DTYP is meaningless.</p>

<p>The <b>RVAL</b> field contains - whenever possible - the raw data value exactly as it is obtained from the hardware or from the associated device driver and before it undergoes any conversions.
The Soft Channel device support module reads values directly into VAL,
bypassing this field.</p>

<p>The <b>VAL</b> field contains the record&#39;s final value,
after any needed conversions have been performed.</p>

<h3><a class='u'
name="Device-Input"
>Device Input</a></h3>

<p>A device input routine normally returns one of the following values to its associated record support routine:</p>

<ul>
<li>0: Success and convert.
The input value is in RVAL.
The record support module will compute VAL from RVAL.</li>

<li>2: Success,
but don&#39;t convert.
The device support module can specify this value if it does not want any conversions.
It might do this for two reasons:
<ul>
<li>A hardware error is detected (in this case,
it should also raise an alarm condition).</li>

<li>The device support routine reads values directly into the VAL field and then sets UDF to FALSE.
For some record types the device support routine may have to do other record-specific processing as well such as applying a smoothing filter to the engineering units value.</li>
</ul>
</li>
</ul>

<h3><a class='u'
name="Device-Support-for-Soft-Records"
>Device Support for Soft Records</a></h3>

<p>In most cases,
two soft output device support modules are provided: Soft Channel and Raw Soft Channel.
Both allow INP to be a constant,
a database link,
or a channel access link.
The Soft Channel device support module reads input directly into the VAL field and specifies that no value conversion should be performed.
This allows the record to store values in the data type of its VAL field.
Note that for Soft Channel input,
the RVAL field is not used.
The Raw Soft Channel support module reads input into RVAL and indicates that any specified unit conversions be performed.</p>

<p>The device support read routine normally calls <code>dbGetLink()</code> which fetches a value from the link.</p>

<p>If a value was returned by the link the UDF field is set to FALSE.
The device support read routine normally returns the status from <code>dbGetLink()</code>.</p>

<h3><a class='u'
name="Input-Simulation-Fields"
>Input Simulation Fields</a></h3>

<p>The <b>SIMM</b> field controls simulation mode.
By setting this field to YES or RAW,
the record can be switched into simulation mode of operation.
While in simulation mode,
input will be obtained from SIOL instead of INP.</p>

<p>The <b>SIML</b> field specifies the simulation mode location.
This field can be a constant,
a database link,
or a channel access link.
If SIML is a database or channel access link,
then SIMM is read from SIML.
If SIML is a constant link then SIMM is initialized with the constant value,
but can be changed via database or channel access puts.</p>

<p>The <b>SVAL</b> field contains the simulation value.
This is the record&#39;s input value,
in engineering units,
when the record is switched into simulation mode,
i.e.,
SIMM is set to YES or RAW.
If the record type supports conversion,
setting SIMM to RAW causes SVAL to be written to RVAL and the conversion to be done.</p>

<p>The <b>SIOL</b> field is a link that can be used to fetch the simulation value.
The link can be a constant,
a database link,
or a channel access link.
If SIOL is a database or channel access link,
then SVAL is read from SIOL.
If SIOL is a constant link then SVAL is initialized with the constant value but can be changed via database or channel access puts.</p>

<p>The <b>SIMS</b> field specifies the simulation mode alarm severity.
When this field is set to a value other than NO_ALARM and the record is in simulation mode,
it will be put into alarm with this severity and a status of SIMM_ALARM.</p>

<p>The <b>SDLY</b> field specifies a delay (in seconds) to implement asynchronous processing in simulation mode.
A positive SDLY value will be used as delay between the first and second phase of processing in simulation mode.
A negative value (default) specifies synchronous processing.</p>

<p>The <b>SSCN</b> field specifies the SCAN mechanism to be used in simulation mode.
This is specifically useful for &#39;I/O Intr&#39; scanned records,
which would otherwise never be scanned in simulation mode.</p>

<h3><a class='u'
name="Simulation-Mode-for-Input-Records"
>Simulation Mode for Input Records</a></h3>

<p>An input record can be switched into simulation mode of operation by setting the value of SIMM to YES or RAW.
During simulation,
the record will be put into alarm with a severity of SIMS and a status of SIMM_ALARM.</p>

<pre>           --  (SIMM = NO?)
         /         (if supported and directed by device support,
        /              INP -&#62; RVAL -- convert -&#62; VAL),
                   (else INP -&#62; VAL)
 SIML -&#62; SIMM

         \
           --  (SIMM = YES?) SIOL -&#62; SVAL -&#62; VAL
           \
             -- (SIMM = RAW?) SIOL -&#62; SVAL -&#62; RVAL -- convert -&#62; VAL</pre>

<p>If SIMM is set to YES, the input value, in engineering units, will be obtained from SIOL instead of INP and directly written to the VAL field. If SIMM is set to RAW, the value read through SIOL will be truncated and written to the RVAL field, followed by the regular raw value conversion. While the record is in simulation mode, there will be no calls to device support when the record is processed.</p>

<p>If SIOL contains a link, a TSE setting of &#34;time from device&#34; (-2) is honored in simulation mode by taking the time stamp from the record that SIOL points to.</p>

<p>Normally input records contain a private <code>readValue()</code> routine which performs the following steps:</p>

<ul>
<li>If PACT is TRUE, the device support read routine is called, status is set to its return code, and readValue returns.</li>

<li>Call <code>dbGetLink()</code> to get a new value for SIMM from SIML.</li>

<li>Check value of SIMM.</li>

<li>If SIMM is NO, then call the device support read routine, set status to its return code, and return.</li>

<li>If SIMM is YES or RAW, then
<ul>
<li>Set alarm status to SIMM_ALARM and severity to SIMS, if SIMS is greater than zero.</li>

<li>If the record simulation processing is synchronous (SDLY &#60; 0) or the record is in the second phase of an asynchronous processing, call <code>dbGetLink()</code> to read the input value from SIOL into SVAL. Set status to the return code from <code>dbGetLink()</code>. If the call succeeded and SIMM is YES, write the value to VAL and set the status to 2 (don&#39;t convert), if SIMM is RAW and the record type supports conversion, cast the value to RVAL and leave the status as 0 (convert).
<p>Otherwise (record is in first phase of an asynchronous processing), set up a callback processing with the delay specified in SDLY.</p>
</li>
</ul>
</li>

<li>If SIMM is not YES, NO or RAW, a SOFT alarm with a severity of INVALID is raised, and return status is set to -1.</li>
</ul>

<!-- end doc -->

</body></html>
