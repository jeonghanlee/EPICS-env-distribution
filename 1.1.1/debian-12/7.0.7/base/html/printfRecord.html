<html><head><title>Printf Record (printf)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
<link rel="stylesheet" type="text/css" title="pod_stylesheet" href="style.css">

</head>
<body class='pod'>
<!--
  generated by EPICS::PodHtml v,
  using Pod::Simple::PullParser v3.43,
  under Perl v5.036000 at Wed May 14 07:37:48 2025 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to EPICS::PodHtml, and/or subclassing EPICS::PodHtml,
   then reconverting this document from the Pod source.
   When in doubt, email the author of EPICS::PodHtml for advice.
   See 'perldoc EPICS::PodHtml' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>
<div class="pod">


<h1><a class='u'
name="Printf-Record-printf"
>Printf Record (printf)</a></h1>

<p>The printf record is used to generate and write a string using a format specification and parameters,
analogous to the C <code>printf()</code> function.</p>

<h2><a class='u'
name="Parameter-Fields"
>Parameter Fields</a></h2>

<p>The record-specific fields are described below,
grouped by functionality.</p>

<h3><a class='u'
name="Scan-Parameters"
>Scan Parameters</a></h3>

<p>The printf record has the standard fields for specifying under what circumstances it will be processed.
These fields are described in <a href="dbCommonRecord.html#Scan-Fields" class="podlinkpod"
>Scan Fields</a>.</p>
<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">SCAN</td><td class="cell">Scan Mechanism</td><td class="cell">MENU (<a href='menuScan.html'>menuScan</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">PHAS</td><td class="cell">Scan Phase</td><td class="cell">SHORT</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">EVNT</td><td class="cell">Event Name</td><td class="cell">STRING [40]</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">PRIO</td><td class="cell">Scheduling Priority</td><td class="cell">MENU (<a href='menuPriority.html'>menuPriority</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">PINI</td><td class="cell">Process at iocInit</td><td class="cell">MENU (<a href='menuPini.html'>menuPini</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

</table></blockquote>


<h3><a class='u'
name="String-Generation-Parameters"
>String Generation Parameters</a></h3>

<p>The printf record must specify the desired output string with embedded format specifiers in the FMT field.
Plain characters are copied directly to the output string.
A pair of percent characters &#39;<code>%%</code>&#39; are converted into a single percent character in the output string.
A single precent character &#39;<code>%</code>&#39; introduces a format specifier and is followed by zero or more of the standard <code>printf()</code> format flags and modifiers:</p>

<ul>
<li>Plus (&#39;<code>+</code>&#39;)</li>

<li>Minus (&#39;<code>-</code>&#39;)</li>

<li>Space (&#39;<code> </code>&#39;)</li>

<li>Hash (&#39;<code>#</code>&#39;)</li>

<li>Minimum Field Width (decimal digits or &#39;<code>*</code>&#39;)</li>

<li>Precision (&#39;<code>.</code>&#39; followed by decimal digits or &#39;<code>*</code>&#39;)</li>

<li>Length Modifier &#39;<code>hh</code>&#39; &#8211; Reads link as DBR_CHAR or DBR_UCHAR</li>

<li>Length Modifier &#39;<code>h</code>&#39; &#8211; Reads link as DBR_SHORT or DBR_USHORT for integer conversions,
DBR_FLOAT for floating-point conversions.</li>

<li>Length Modifier &#39;<code>l</code>&#39; &#8211; Reads link as DBR_LONG or DBR_ULONG for integer conversions,
array of DBR_CHAR for string conversion.</li>

<li>Length Modifier &#39;<code>ll</code>&#39; &#8211; Reads link as DBR_INT64 or DBR_UINT64 for integer conversions.</li>
</ul>

<p>The following character specifies the conversion to perform,
see your operating system&#39;s <code>printf()</code> documentation for more details.
These conversions ultimately call the <code>snprintf()</code> routine for the actual string conversion process,
so are subject to the behaviour of that routine.</p>

<ul>
<li>&#39;<code>c</code>&#39; &#8211; Convert to a character.
Only single byte characters are permitted.</li>

<li>&#39;<code>d</code>&#39; or &#39;<code>i</code>&#39; &#8211; Convert to a decimal integer.</li>

<li>&#39;<code>o</code>&#39; &#8211; Convert to an unsigned octal integer.</li>

<li>&#39;<code>u</code>&#39; &#8211; Convert to an unsigned decimal integer.</li>

<li>&#39;<code>x</code>&#39; &#8211; Convert to an unsigned hexadecimal integer,
using <code>abcdef</code>.</li>

<li>&#39;<code>X</code>&#39; &#8211; Convert to an unsigned hexadecimal integer,
using <code>ABCDEF</code>.</li>

<li>&#39;<code>e</code>&#39; or &#39;<code>E</code>&#39; &#8211; Convert to floating-point in exponent style,
reading the link as DBR_DOUBLE or DBR_FLOAT.</li>

<li>&#39;<code>f</code>&#39; or &#39;<code>F</code>&#39; &#8211; Convert to floating-point in fixed-point style,
reading the link as DBR_DOUBLE or DBR_FLOAT.</li>

<li>&#39;<code>g</code>&#39; or &#39;<code>G</code>&#39; &#8211; Convert to floating-point in general style,
reading the link as DBR_DOUBLE or DBR_FLOAT.</li>

<li>&#39;<code>s</code>&#39; &#8211; Insert string,
reading the link as DBR_STRING or array of DBR_CHAR.</li>
</ul>

<p>The fields INP0 ...
INP9 are input links that provide the parameter values to be formatted into the output.
The format specifiers in the FMT string determine which type of the data is requested through the appropriate input link.
As with <code>printf()</code> a <code>*</code> character may be used in the format to specify width and/or precision instead of numeric literals,
in which case additional input links are used to provide the necessary integer parameter or parameters.
See <a href="https://docs.epics-controls.org/en/latest/guides/EPICS_Process_Database_Concepts.html#address-specification" class="podlinkurl"
>Address Specification</a> for information on specifying links.</p>

<p>The formatted string is written to the VAL field.
The maximum number of characters in VAL is given by SIZV,
and cannot be larger than 65535.
The LEN field contains the length of the formatted string in the VAL field.</p>
<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">FMT</td><td class="cell">Format String</td><td class="cell">STRING [81]</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">INP0</td><td class="cell">Input 0</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INP1</td><td class="cell">Input 1</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INP2</td><td class="cell">Input 2</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INP3</td><td class="cell">Input 3</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INP4</td><td class="cell">Input 4</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INP5</td><td class="cell">Input 5</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INP6</td><td class="cell">Input 6</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INP7</td><td class="cell">Input 7</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INP8</td><td class="cell">Input 8</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">INP9</td><td class="cell">Input 9</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">VAL</td><td class="cell">Result</td><td class="cell">STRING[SIZV]</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">SIZV</td><td class="cell">Size of VAL buffer</td><td class="cell">USHORT</td><td class="cell">Yes</td><td class="cell">41</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">LEN</td><td class="cell">Length of VAL</td><td class="cell">ULONG</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

</table></blockquote>


<h3><a class='u'
name="Output-Specification"
>Output Specification</a></h3>

<p>The output link specified in the OUT field specifies where the printf record is to write the contents of its VAL field.
The link can be a database or channel access link.
If the OUT field is a constant,
no output will be written.</p>

<p>In addition,
the appropriate device support module must be entered into the DTYP field.</p>
<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">OUT</td><td class="cell">Output Specification</td><td class="cell">OUTLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">DTYP</td><td class="cell">Device Type</td><td class="cell">DEVICE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

</table></blockquote>


<h3><a class='u'
name="Operator-Display-Parameters"
>Operator Display Parameters</a></h3>

<p>See <a href="dbCommonRecord.html#Operator-Display-Parameters" class="podlinkpod"
>Fields Common to All Record Types</a> for more on the record name (NAME) and description (DESC) fields.</p>
<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">NAME</td><td class="cell">Record Name</td><td class="cell">STRING [61]</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">DESC</td><td class="cell">Descriptor</td><td class="cell">STRING [41]</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

</table></blockquote>


<h3><a class='u'
name="Alarm-Parameters"
>Alarm Parameters</a></h3>

<p>The printf record has the alarm parameters common to all record types.
<a href="dbCommonRecord.html#Alarm-Fields" class="podlinkpod"
>Alarm Fields</a> lists the fields related to alarms that are common to all record types.</p>

<p>The IVLS field specifies a string which is sent to the OUT link if if input link data are invalid.</p>
<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">IVLS</td><td class="cell">Invalid Link String</td><td class="cell">STRING [16]</td><td class="cell">Yes</td><td class="cell">LNK</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

</table></blockquote>


<h2><a class='u'
name="Device-Support-Interface"
>Device Support Interface</a></h2>

<p>The record requires device support to provide an entry table (dset) which defines the following members:</p>

<pre> typedef struct {
     long number;
     long (*report)(int level);
     long (*init)(int after);
     long (*init_record)(printfRecord *prec);
     long (*get_ioint_info)(int cmd, printfRecord *prec, IOSCANPVT *piosl);
     long (*write_string)(printfRecord *prec);
 } printfdset;</pre>

<p>The module must set <code>number</code> to at least 5, and provide a pointer to its <code>write_string()</code> routine; the other function pointers may be <code>NULL</code> if their associated functionality is not required for this support layer. Most device supports also provide an <code>init_record()</code> routine to configure the record instance and connect it to the hardware or driver support layer.</p>

<h2><a class='u'
name="Device-Support-for-Soft-Records"
>Device Support for Soft Records</a></h2>

<p>A soft device support module Soft Channel is provided for writing values to other records or other software components.</p>

<p>Device support for DTYP <code>stdio</code> is provided for writing values to the stdout, stderr, or errlog streams. <code>INST_IO</code> addressing <code>@stdout</code>, <code>@stderr</code> or <code>@errlog</code> is used on the OUT link field to select the desired stream.</p>
</div>


<!-- end doc -->

</body></html>
