<html><head><title>Data Fanout Record (dfanout)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
<link rel="stylesheet" type="text/css" title="pod_stylesheet" href="style.css">

</head>
<body class='pod'>
<!--
  generated by EPICS::PodHtml v,
  using Pod::Simple::PullParser v3.42,
  under Perl v5.032001 at Thu May 15 07:11:19 2025 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to EPICS::PodHtml, and/or subclassing EPICS::PodHtml,
   then reconverting this document from the Pod source.
   When in doubt, email the author of EPICS::PodHtml for advice.
   See 'perldoc EPICS::PodHtml' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>
<div class="pod">


<h1><a class='u'
name="Data-Fanout-Record-dfanout"
>Data Fanout Record (dfanout)</a></h1>

<p>The Data Fanout or &#34;dfanout&#34; record is used to forward data to up to eight other records.
It&#39;s similar to the fanout record except that the capability to forward data has been added to it.
If has no associated device support.</p>

<h2><a class='u'
name="Parameter-Fields"
>Parameter Fields</a></h2>

<p>The record-specific fields are described below,
grouped by functionality.</p>

<h3><a class='u'
name="Scan-Parameters"
>Scan Parameters</a></h3>

<p>The data fanout record has the standard fields for specifying under what circumstances it will be processed.
These fields are listed in <a href="dbCommonRecord.html#Scan-Fields" class="podlinkpod"
>Scan Fields</a>.</p>

<h3><a class='u'
name="Desired-Output-Parameters"
>Desired Output Parameters</a></h3>

<p>The data fanout record must specify where the desired output value originates,
i.e.,
the data which is to be fowarded to the records in its output links.
The output mode select (OMSL) field determines whether the output originates from another record or from run-time database access.
When set to <code>closed_loop</code>,
the desired output is retrieved from the link specified in the Desired Output Link (DOL) field,
which can specify either a database or a channel access link,
and placed into the VAL field.
When set to <code>supervisory</code>,
the desired output can be written to the VAL field via dbPuts at run-time.</p>

<p>The DOL field can also be a constant in which case the VAL field is initialized to the constant value.</p>

<p>Note that there are no conversion parameters,
so the desired output value undergoes no conversions before it is sent out to the output links.</p>
<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">DOL</td><td class="cell">Desired Output Link</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">OMSL</td><td class="cell">Output Mode Select</td><td class="cell">MENU (<a href='menuOmsl.html'>menuOmsl</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">VAL</td><td class="cell">Desired Output</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

</table></blockquote>


<h3><a class='u'
name="Write-Parameters"
>Write Parameters</a></h3>

<p>The OUTA-OUTH fields specify where VAL is to be sent.
Each field that is to forward data must specify an address to another record.
See <a href="https://docs.epics-controls.org/en/latest/guides/EPICS_Process_Database_Concepts.html#address-specification" class="podlinkurl"
>Address Specification</a> for information on specifying links.</p>

<p>The SELL,
SELM,
and SELN fields specify which output links are to be used.</p>

<h4><a class='u'
name="Menu-dfanoutSELM"
>Menu dfanoutSELM</a></h4>

<p>SELM is a menu,
with three choices:</p>
<blockquote><table border="1"><tr>
<th>Index</th><th>Identifier</th><th>Choice String</th></tr>
<tr>
<td class='cell DBD_Menu index'>0</td>
<td class='cell DBD_Menu identifier'>dfanoutSELM_All</td>
<td class='cell DBD_Menu choice'>All</td>
</tr>
<tr>
<td class='cell DBD_Menu index'>1</td>
<td class='cell DBD_Menu identifier'>dfanoutSELM_Specified</td>
<td class='cell DBD_Menu choice'>Specified</td>
</tr>
<tr>
<td class='cell DBD_Menu index'>2</td>
<td class='cell DBD_Menu identifier'>dfanoutSELM_Mask</td>
<td class='cell DBD_Menu choice'>Mask</td>
</tr>
</table></blockquote>


<p>If SELM is <code>All</code>,
then all output links are used,
and the values of SELL and SELN are ignored.</p>

<p>If SELM is <code>Specified</code>,
then the value of SELN is used to specify a single link which will be used.
If SELN==0,
then no link will be used; if SELN==1,
then OUTA will be used,
and so on.</p>

<p>SELN can either have its value set directly,
or have it retrieved from another EPICS PV.
If SELL is a valid PV link,
then SELN will be read from the linked PV.</p>

<p>If SELM is <code>Mask</code>,
then SELN will be treated as a bit mask.
If bit zero (the LSB) of SELN is set,
then OUTA will be written to; if bit one is set,
OUTB will be written to,
and so on.
Thus when SELN==5,
both OUTC and OUTA will be written to.</p>
<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">SELL</td><td class="cell">Link Selection Loc</td><td class="cell">INLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">SELM</td><td class="cell">Select Mechanism</td><td class="cell">MENU (<a href='#Menu-dfanoutSELM'>dfanoutSELM</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">SELN</td><td class="cell">Link Selection</td><td class="cell">USHORT</td><td class="cell">No</td><td class="cell">1</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">OUTA</td><td class="cell">Output Spec A</td><td class="cell">OUTLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">OUTB</td><td class="cell">Output Spec B</td><td class="cell">OUTLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">OUTC</td><td class="cell">Output Spec C</td><td class="cell">OUTLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">OUTD</td><td class="cell">Output Spec D</td><td class="cell">OUTLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">OUTE</td><td class="cell">Output Spec E</td><td class="cell">OUTLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">OUTF</td><td class="cell">Output Spec F</td><td class="cell">OUTLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">OUTG</td><td class="cell">Output Spec G</td><td class="cell">OUTLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">OUTH</td><td class="cell">Output Spec H</td><td class="cell">OUTLINK</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

</table></blockquote>


<h3><a class='u'
name="Operator-Display-Parameters"
>Operator Display Parameters</a></h3>

<p>These parameters are used to present meaningful data to the operator.
They do not affect the functioning of the record at all.</p>

<ul>
<li>NAME is the record&#39;s name,
and can be useful when the PV name that a client knows is an alias for the record.</li>

<li>DESC is a string that is usually used to briefly describe the record.</li>

<li>EGU is a string of up to 16 characters naming the engineering units that the VAL field represents.</li>

<li>The HOPR and LOPR fields set the upper and lower display limits for the VAL,
HIHI,
HIGH,
LOW,
and LOLO fields.</li>

<li>The PREC field determines the floating point precision (i.e.
the number of digits to show after the decimal point) with which to display VAL and the other DOUBLE fields.</li>
</ul>

<p>See <a href="dbCommonRecord.html#Operator-Display-Parameters" class="podlinkpod"
>Fields Common to All Record Types</a> for more about the record name (NAME) and description (DESC) fields.</p>
<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">NAME</td><td class="cell">Record Name</td><td class="cell">STRING [61]</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">DESC</td><td class="cell">Descriptor</td><td class="cell">STRING [41]</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">EGU</td><td class="cell">Engineering Units</td><td class="cell">STRING [16]</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">HOPR</td><td class="cell">High Operating Range</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">LOPR</td><td class="cell">Low Operating Range</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">PREC</td><td class="cell">Display Precision</td><td class="cell">SHORT</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

</table></blockquote>


<h3><a class='u'
name="Alarm-Parameters"
>Alarm Parameters</a></h3>

<p>The possible alarm conditions for data fanouts are the SCAN,
READ,
INVALID,
and limit alarms.
The SCAN and READ alarms are called by the record routines.
The limit alarms are configured by the user in the HIHI,
LOLO,
HIGH,
and LOW fields using floating point values.
The limit alarms apply only to the VAL field.
The severity for each of these limits is specified in the corresponding field (HHSV,
LLSV,
HSV,
LSV) and can be either NO_ALARM,
MINOR,
or MAJOR.
In the hysteresis field (HYST) can be entered a number which serves as the deadband on the limit alarms.</p>

<p>See <a href="https://docs.epics-controls.org/en/latest/guides/EPICS_Process_Database_Concepts.html#alarm-specification" class="podlinkurl"
>Alarm Specification</a> for a complete explanation of record alarms and of the standard fields.
<a href="dbCommonRecord.html#Alarm-Fields" class="podlinkpod"
>Alarm Fields</a> lists other fields related to alarms that are common to all record types.</p>
<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">HIHI</td><td class="cell">Hihi Alarm Limit</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">HIGH</td><td class="cell">High Alarm Limit</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">LOW</td><td class="cell">Low Alarm Limit</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">LOLO</td><td class="cell">Lolo Alarm Limit</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">HHSV</td><td class="cell">Hihi Severity</td><td class="cell">MENU (<a href='menuAlarmSevr.html'>menuAlarmSevr</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">HSV</td><td class="cell">High Severity</td><td class="cell">MENU (<a href='menuAlarmSevr.html'>menuAlarmSevr</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">LSV</td><td class="cell">Low Severity</td><td class="cell">MENU (<a href='menuAlarmSevr.html'>menuAlarmSevr</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">LLSV</td><td class="cell">Lolo Severity</td><td class="cell">MENU (<a href='menuAlarmSevr.html'>menuAlarmSevr</a>)</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">Yes</td></tr>

<tr><td class="cell">HYST</td><td class="cell">Alarm Deadband</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

</table></blockquote>


<h3><a class='u'
name="Monitor-Parameters"
>Monitor Parameters</a></h3>

<p>These parameters are used to determine when to send monitors placed on the VAL field.
These monitors are sent when the value field exceeds the last monitored fields by the specified deadband,
ADEL for archivers monitors and MDEL for all other types of monitors.
If these fields have a value of zero,
everytime the value changes,
a monitor will be triggered; if they have a value of -1,
everytime the record is scanned,
monitors are triggered.
See <a href="#Monitor-Specification" class="podlinkpod"
>&#34;Monitor Specification&#34;</a> for a complete explanation of monitors.</p>
<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">ADEL</td><td class="cell">Archive Deadband</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

<tr><td class="cell">MDEL</td><td class="cell">Monitor Deadband</td><td class="cell">DOUBLE</td><td class="cell">Yes</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">Yes</td><td class="cell">No</td></tr>

</table></blockquote>


<h3><a class='u'
name="Run-Time-Parameters-and-Simulation-Mode-Parameters"
>Run-Time Parameters and Simulation Mode Parameters</a></h3>

<p>These parameters are used by the run-time code for processing the data fanout record.
Ther are not configurable.
They are used to implement the hysteresis factors for monitor callbacks.</p>
<blockquote><table border="1"><tr>
<th>Field</th><th>Summary</th><th>Type</th><th>DCT</th>
<th>Default</th><th>Read</th><th>Write</th><th>CA PP</th>
</tr>
<tr><td class="cell">LALM</td><td class="cell">Last Value Alarmed</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">ALST</td><td class="cell">Last Value Archived</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

<tr><td class="cell">MLST</td><td class="cell">Last Val Monitored</td><td class="cell">DOUBLE</td><td class="cell">No</td><td class="cell">&nbsp;</td><td class="cell">Yes</td><td class="cell">No</td><td class="cell">No</td></tr>

</table></blockquote>


<h2><a class='u'
name="Record-Support"
>Record Support</a></h2>

<h3><a class='u'
name="Record-Support-Routines"
>Record Support Routines</a></h3>

<h2><a class='u'
name="init_record"
><code>init_record()</code></a></h2>

<p>This routine initializes all output links that are defined.
Then it initializes DOL if DOL is a constant or a PV_LINK.
When initializing the output links and the DOL link,
a non-zero value is returned if an error occurs.</p>

<h2><a class='u'
name="process"
><code>process()</code></a></h2>

<p>See next section.</p>

<h2><a class='u'
name="get_units"
><code>get_units()</code></a></h2>

<p>The routine copies the string specified in the EGU field to the location specified by a pointer which is passed to the routine.</p>

<h2><a class='u'
name="get_graphic_double"
><code>get_graphic_double()</code></a></h2>

<p>If the referenced field is VAL,
HIHI,
HIGH,
LOW,
or LOLO,
this routine sets the <code>upper_disp_limit</code> member of the <code>dbr_grDouble</code> structure to the HOPR and the <code>lower_disp_limit</code> member to the LOPR.
If the referenced field is not one of the above fields,
then <code>recGblGetControlDouble()</code> routine is called.</p>

<h2><a class='u'
name="get_control_double"
><code>get_control_double()</code></a></h2>

<p>Same as the <code>get_graphic_double()</code> routine except that it uses the <code>dbr_ctrlDouble</code> structure.</p>

<h2><a class='u'
name="get_alarm_double"
><code>get_alarm_double()</code></a></h2>

<p>This sets the members of the <code>dbr_alDouble</code> structure to the specified alarm limits when the referenced field is VAL:</p>

<blockquote>
<p>upper_alarm_limit = HIHI</p>

<p>upper_warning_limit = HIGH</p>

<p>lower_warning_limit = LOW</p>

<p>lower_alarm_limit = LOLO</p>
</blockquote>

<p>If the referenced field is not VAL,
the <code>recGblGetAlarmDouble()</code> routine is called.</p>

<h3><a class='u'
name="Record-Processing"
>Record Processing</a></h3>

<dl>
<dt><a 
>1.
The <code>process()</code> routine first checks that DOL is not a constant link and that OMSL is set to &#34;closed_loop&#34;.
If so,
it retrieves a value through DOL and places it into VAL.
If no errors occur,
UDF is set to FALSE.</a></dt>

<dd>
<dt><a name="PACT-is-set-TRUE-and-the-record-s-timestamp-is-set"
>2.
PACT is set TRUE,
and the record&#39;s timestamp is set.</a></dt>

<dd>
<dt><a name="A-value-is-fetched-from-SELL-and-placed-into-SELN"
>3.
A value is fetched from SELL and placed into SELN.</a></dt>

<dd>
<dt><a name="Alarms-ranges-are-checked-against-the-contents-of-the-VAL-field"
>4.
Alarms ranges are checked against the contents of the VAL field.</a></dt>

<dd>
<dt><a 
>5.
VAL is then sent through the OUTA-OUTH links by calling <code>dbPutLink()</code> for each link,
conditional on the setting of SELM and the value in SELN.</a></dt>

<dd>
<dt><a 
>6.
Value and archive monitors are posted on the VAL field if appropriate based on the settings of MDEL and ADEL respectively.</a></dt>

<dd>
<dt><a name="The-data-fanout-s-forward-link-FLNK-is-processed"
>7.
The data fanout&#39;s forward link FLNK is processed.</a></dt>

<dd>
<dt><a name="PACT-is-set-FALSE-and-the-process-routine-returns"
>6.
PACT is set FALSE,
and the <code>process()</code> routine returns.</a></dt>
</dl>
</div>


<!-- end doc -->

</body></html>
